const e=document.querySelector(".mask");window.addEventListener("DOMContentLoaded",(function(){setTimeout((()=>{e.classList.add("hide")}),600)}));const t={formEl:document.querySelector(".form"),inputEl:document.querySelector(".input__form"),buttonEl:document.querySelector(".submit"),error:document.querySelector(".error__message")};t.formEl.addEventListener("submit",(function(e){e.preventDefault();const n=e.currentTarget.elements[0].value;t.error.style.display="none",""==n&&(t.error.style.display="block");e.currentTarget.reset()}));async function n(e,t){try{const n="https://api.themoviedb.org/3/search/movie";return(await fetch(`${n}?api_key=1c5c067e324c39f9223ad13ef9891a0a&page=${t}&query=${e}`)).json()}catch(e){console.error(e)}}const r=document.querySelector(".gallery"),o=document.querySelector(".form");o.addEventListener("input",(function(e){c=e.target.value})),o.addEventListener("submit",(function(e){e.preventDefault(),r.innerHTML="",n(c,1).then((e=>{a(e)}))}));let c="";(async function(){try{const e="https://api.themoviedb.org/3/genre/movie/list";return(await fetch(`${e}?api_key=1c5c067e324c39f9223ad13ef9891a0a`)).json()}catch(e){console.error(e)}})().then((e=>{localStorage.setItem("Genres",JSON.stringify(e.genres))}));localStorage.getItem("Genres");function a(e){const t=e.results;e.total_results,e.total_pages;!function(e){const t="https://image.tmdb.org/t/p",n=e.map((e=>{let n="";const r=localStorage.getItem("Genres"),o=JSON.parse(r);return 0!==e.genre_ids.length&&Object.values(o).forEach((t=>{e.genre_ids.includes(t.id)&&(n=n.concat(t.name,", "))})),n=n.slice(0,n.length-2),`<div class="card">\n      <img class="gallery__image" src="${t}/w300${e.poster_path}" alt="Постер не найден" loading="lazy" />\n    <p class="genres">${n}</p>\n  </div>`})).join("");r.insertAdjacentHTML("beforeend",n)}(t)}(async function(e){try{const t="https://api.themoviedb.org/3/trending/movie/week";return(await fetch(`${t}?api_key=1c5c067e324c39f9223ad13ef9891a0a&page=${e}`)).json()}catch(e){console.error(e)}})(1).then((e=>{a(e)}));
//# sourceMappingURL=library.2c07e11e.js.map
