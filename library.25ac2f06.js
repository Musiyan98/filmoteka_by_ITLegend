const e=document.querySelector(".mask");window.addEventListener("DOMContentLoaded",(function(){setTimeout((()=>{e.classList.add("hide")}),600)}));const t={formEl:document.querySelector(".form"),inputEl:document.querySelector(".input__form"),buttonEl:document.querySelector(".submit"),error:document.querySelector(".error__message")};t.formEl.addEventListener("submit",(function(e){e.preventDefault();const r=e.currentTarget.elements[0].value;t.error.style.display="none",""==r&&(t.error.style.display="block");e.currentTarget.reset()}));const r={watched:document.querySelector(".watched"),queue:document.querySelector(".queue")};r.watched.addEventListener("click",(()=>{r.watched.classList.add("active"),r.queue.classList.remove("active")})),r.queue.addEventListener("click",(()=>{r.queue.classList.add("active"),r.watched.classList.remove("active")}));async function n(e,t){try{const r="https://api.themoviedb.org/3/search/movie";return(await fetch(`${r}?api_key=1c5c067e324c39f9223ad13ef9891a0a&page=${t}&query=${e}`)).json()}catch(e){console.error(e)}}const c=document.querySelector(".gallery"),o=document.querySelector(".form");o.addEventListener("input",(function(e){a=e.target.value})),o.addEventListener("submit",(function(e){e.preventDefault(),c.innerHTML="",n(a,1).then((e=>{l(e)}))}));let a="",s=[],i=[];(async function(){try{const e="https://api.themoviedb.org/3/genre/movie/list";return(await fetch(`${e}?api_key=1c5c067e324c39f9223ad13ef9891a0a`)).json()}catch(e){console.error(e)}})().then((e=>{localStorage.setItem("Genres",JSON.stringify(e.genres))}));localStorage.getItem("Genres");function l(e){const t=e.results;e.total_results,e.total_pages;!function(e){const t="https://image.tmdb.org/t/p";s=[];const r=e.map((e=>{s.push(e);let r="";const n=localStorage.getItem("Genres"),c=JSON.parse(n);return 0!==e.genre_ids.length&&Object.values(c).forEach((t=>{e.genre_ids.includes(t.id)&&(r=r.concat(t.name,", "))})),r=r.slice(0,r.length-2),`<div class="card">\n      <img class="gallery__image" src="${t}/w300${e.poster_path}" alt="Постер не найден" loading="lazy" />\n    <p class="genres">${r}</p>\n  </div>`})).join("");c.insertAdjacentHTML("beforeend",r),localStorage.removeItem("Genres"),localStorage.setItem("currentArrayFilm",JSON.stringify(s))}(t)}(async function(e){try{const t="https://api.themoviedb.org/3/trending/movie/week";return(await fetch(`${t}?api_key=1c5c067e324c39f9223ad13ef9891a0a&page=${e}`)).json()}catch(e){console.error(e)}})(1).then((e=>{l(e)})),function(){let e=localStorage.getItem("currentArrayFilm");i=JSON.parse(e),console.log(i)}();document.querySelector(".gallery-lib"),document.querySelector(".div__text--decoration");
//# sourceMappingURL=library.25ac2f06.js.map
