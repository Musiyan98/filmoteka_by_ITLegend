const e=document.querySelector(".mask");window.addEventListener("DOMContentLoaded",(function(){setTimeout((()=>{e.classList.add("hide")}),600)}));const t={formEl:document.querySelector(".form"),inputEl:document.querySelector(".input__form"),buttonEl:document.querySelector(".submit"),error:document.querySelector(".error__message")};try{t.formEl.addEventListener("submit",(function(e){e.preventDefault();const o=e.currentTarget.elements[0].value;t.error.style.display="none",""==o&&(t.error.style.display="block");e.currentTarget.reset()}))}catch(e){console.log(e)}const o={watched:document.querySelector(".watched"),queue:document.querySelector(".queue")};try{o.watched.addEventListener("click",(()=>{o.watched.classList.add("active"),o.queue.classList.remove("active")}))}catch(e){console.log(e)}try{o.queue.addEventListener("click",(()=>{o.queue.classList.add("active"),o.watched.classList.remove("active")}))}catch(e){console.log(e)}async function a(e,t){try{const o="https://api.themoviedb.org/3/search/movie";return(await fetch(`${o}?api_key=1c5c067e324c39f9223ad13ef9891a0a&page=${t}&query=${e}`)).json()}catch(e){console.error(e)}}const n=document.querySelector(".gallery"),r=document.querySelector(".form");r.addEventListener("input",(function(e){c=e.target.value})),r.addEventListener("submit",(function(e){e.preventDefault(),n.innerHTML="",a(c,1).then((e=>{i(e)}))}));let c="",l=[],s=[];(async function(){try{const e="https://api.themoviedb.org/3/genre/movie/list";return(await fetch(`${e}?api_key=1c5c067e324c39f9223ad13ef9891a0a`)).json()}catch(e){console.error(e)}})().then((e=>{localStorage.setItem("Genres",JSON.stringify(e.genres))}));localStorage.getItem("Genres");function i(e){const t=e.results;e.total_results,e.total_pages;!function(e){const t="https://image.tmdb.org/t/p";l=[];const o=e.map((e=>{l.push(e);let o="";const a=localStorage.getItem("Genres"),n=JSON.parse(a);return 0!==e.genre_ids.length&&Object.values(n).forEach((t=>{e.genre_ids.includes(t.id)&&(o=o.concat(t.name,", "))})),o=o.slice(0,o.length-2),`<div class="card" id="${e.id}">\n      <img class="gallery__image" src="${t}/w300${e.poster_path}" alt="Постер не найден" loading="lazy" />\n    <p class="genres">${o}</p>\n  </div>`})).join("");n.insertAdjacentHTML("beforeend",o),localStorage.setItem("currentArrayFilm",JSON.stringify(l))}(t)}var d;(async function(e){try{const t="https://api.themoviedb.org/3/trending/movie/week";return(await fetch(`${t}?api_key=1c5c067e324c39f9223ad13ef9891a0a&page=${e}`)).json()}catch(e){console.error(e)}})(1).then((e=>{i(e)})),function(){let e=localStorage.getItem("currentArrayFilm");s=JSON.parse(e),console.log(s)}(),console.log(s),async function(e){try{console.log(e);const t="https://api.themoviedb.org/3/movie/";return(await fetch(`${t}${e}?api_key=1c5c067e324c39f9223ad13ef9891a0a`)).json()}catch(e){console.error(e)}}((d=2,s[d].id)).then((e=>{localStorage.setItem("IMDb_id",JSON.stringify(e.imdb_id))}));let u=JSON.parse(localStorage.getItem("IMDb_id"));console.log(u);document.querySelector(".gallery-lib"),document.querySelector(".div__text--decoration");function m(e){let t="";const o=localStorage.getItem("Genres"),a=JSON.parse(o);return 0!==e.length&&(e.length>3&&(e=e.slice(0,3)),Object.values(a).forEach((o=>{e.includes(o.id)&&(t=t.concat(o.name,", "))}))),t}function g(e){return console.log("film",e),e.genresName=m(e.genre_ids),console.log("film.genresName",e.genresName),e}document.querySelector(".gallery").addEventListener("click",(function(e){if(e.target===e.currentTarget)return void console.log("nahui");let t=(a=e.target.closest(".card").id,function(){let e=localStorage.getItem("currentArrayFilm");return currentFilmReadLS=JSON.parse(e),currentFilmReadLS}().find((e=>e.id===Number(a)))),o=(m(t.genre_ids),g(t));var a;console.log(o);let n=JSON.parse(localStorage.getItem("IMDb_id"));console.log(n),function(e,t){const{id:o,title:a,original_title:n,poster_path:r,popularity:c,vote_average:l,vote_count:s,overview:i,genresName:d}=e;let u=`    \n        <div class="button-modal--flex">\n            <img class="button-modal__img" src="https://image.tmdb.org/t/p/original${r}" alt="${a} poster">\n            <div class="modal__about--movie">\n                <h2 class="modal__about--title">${a}</h2>\n                <p class="modal__about--title--movie">Vote / Votes <span class="modal__about--rating">${l}</span><span\n                        class="modal__about--title--movie-slech">/</span> <span\n                        class="modal__about--text--bleck">${s}</span>\n                </p>\n                <a target="_blank" class="imdb-btn" href="https://www.imdb.com/title/${t}">IMDb</a>\n\n                <p class="modal__about--title--movie">Popularity<span\n                        class="modal__about--text--popularity">${c}</span>\n                <p class="modal__about--title--movie">Original Title<span class="modal__about--text--original--title">A\n                        ${n}</span>\n                <p class="modal__about--title--movie">Genre<span class="modal__about--text--genre">${d}</span>\n                </p>\n                </p>\n                <p class="about__movie--text">About</p>\n                <p class="about__movie--text--content">${i}</p>\n                <ul class="list__btn--add">\n                    <li><button class="add__watched" data-id="${o}" type="button">add to Watched</button></li>\n                    <li><button class="aadd_queue" data-id="${o}" type="button">add to queue</button></li>\n                </ul>\n\n            </div>\n        </div>\n    </div>`;document.querySelector(".modal").insertAdjacentHTML("beforeend",u)}(o,n),document.querySelector(".backdrop").classList.remove("display__none")})),document.querySelector(".button-modal__close").addEventListener("click",(e=>{document.querySelector(".backdrop").classList.add("display__none")}));
//# sourceMappingURL=library.a0139f61.js.map
