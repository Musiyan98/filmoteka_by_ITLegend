const e=document.querySelector(".mask");window.addEventListener("DOMContentLoaded",(function(){setTimeout((()=>{e.classList.add("hide")}),600)}));const t={formEl:document.querySelector(".form"),inputEl:document.querySelector(".input__form"),buttonEl:document.querySelector(".submit"),error:document.querySelector(".error__message")};try{t.formEl.addEventListener("submit",(function(e){e.preventDefault();const o=e.currentTarget.elements[0].value;t.error.style.display="none",""==o&&(t.error.style.display="block");e.currentTarget.reset()}))}catch(e){console.log(e)}const o={watched:document.querySelector(".watched"),queue:document.querySelector(".queue")};try{o.watched.addEventListener("click",(()=>{o.watched.classList.add("active"),o.queue.classList.remove("active")}))}catch(e){console.log(e)}try{o.queue.addEventListener("click",(()=>{o.queue.classList.add("active"),o.watched.classList.remove("active")}))}catch(e){console.log(e)}async function r(e,t){try{const o="https://api.themoviedb.org/3/search/movie";return(await fetch(`${o}?api_key=1c5c067e324c39f9223ad13ef9891a0a&page=${t}&query=${e}`)).json()}catch(e){console.error(e)}}const c=document.querySelector(".gallery"),n=document.querySelector(".form");n.addEventListener("input",(function(e){a=e.target.value})),n.addEventListener("submit",(function(e){e.preventDefault(),c.innerHTML="",r(a,1).then((e=>{i(e)}))}));let a="",s=[],l=[];(async function(){try{const e="https://api.themoviedb.org/3/genre/movie/list";return(await fetch(`${e}?api_key=1c5c067e324c39f9223ad13ef9891a0a`)).json()}catch(e){console.error(e)}})().then((e=>{localStorage.setItem("Genres",JSON.stringify(e.genres))}));localStorage.getItem("Genres");function i(e){const t=e.results;e.total_results,e.total_pages;!function(e){const t="https://image.tmdb.org/t/p";s=[];const o=e.map((e=>{s.push(e);let o="";const r=localStorage.getItem("Genres"),c=JSON.parse(r);return 0!==e.genre_ids.length&&Object.values(c).forEach((t=>{e.genre_ids.includes(t.id)&&(o=o.concat(t.name,", "))})),o=o.slice(0,o.length-2),`<div class="card">\n      <img class="gallery__image" src="${t}/w300${e.poster_path}" alt="Постер не найден" loading="lazy" />\n    <p class="genres">${o}</p>\n  </div>`})).join("");c.insertAdjacentHTML("beforeend",o),localStorage.removeItem("Genres"),localStorage.setItem("currentArrayFilm",JSON.stringify(s))}(t)}var u;(async function(e){try{const t="https://api.themoviedb.org/3/trending/movie/week";return(await fetch(`${t}?api_key=1c5c067e324c39f9223ad13ef9891a0a&page=${e}`)).json()}catch(e){console.error(e)}})(1).then((e=>{i(e)})),function(){let e=localStorage.getItem("currentArrayFilm");l=JSON.parse(e),console.log(l)}(),console.log(l),async function(e){try{console.log(e);const t="https://api.themoviedb.org/3/movie/";return(await fetch(`${t}${e}?api_key=1c5c067e324c39f9223ad13ef9891a0a`)).json()}catch(e){console.error(e)}}((u=2,l[u].id)).then((e=>{localStorage.setItem("IMDb_id",JSON.stringify(e.imdb_id))}));let d=JSON.parse(localStorage.getItem("IMDb_id"));console.log(d);document.querySelector(".gallery-lib"),document.querySelector(".div__text--decoration");
//# sourceMappingURL=library.2587f66f.js.map
