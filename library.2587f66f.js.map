{"mappings":"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","sources":["src/js/loader.js","src/js/header.js","src/js/library.js","src/js/API.js","src/js/renderPage.js","src/js/gallery-lib.js"],"sourcesContent":["// REF FOR LOADER BACKDROP\nexport const maskEl = document.querySelector('.mask');\n\nwindow.addEventListener('DOMContentLoaded', onWindowLoad);\n\n// FUNCTION FOR LOADER WHEN APP STARTING\n\nexport function onWindowLoad() {\n  setTimeout(() => {\n    maskEl.classList.add('hide');\n  }, 600);\n}\n\n// LOADER SHOW FUNCTION\n\nexport function loaderShow() {\n  maskEl.classList.remove('hide');\n}\n\n// LOADER HIDE FUNCTION\n\nexport function loaderHide() {\n  setTimeout(() => {\n    maskEl.classList.add('hide');\n  }, 600);\n}\n","const refs = {\n    formEl: document.querySelector('.form'),\n    inputEl: document.querySelector('.input__form'),\n    buttonEl: document.querySelector('.submit'),\n    error: document.querySelector('.error__message')\n}\n\ntry {\n    refs.formEl.addEventListener('submit', getValue);\n} catch (eror) {\n    console.log(eror);\n}\n\n// refs.formEl.addEventListener('submit', getValue);\n\nfunction getValue (e){\n    e.preventDefault();\n    const formValue = e.currentTarget.elements[0].value\n    refs.error.style.display = 'none';\nif (formValue == ''){\n    refs.error.style.display = 'block';\n}\n    e.currentTarget.reset();\n}","const refs = {\n    watched: document.querySelector('.watched'),\n    queue: document.querySelector('.queue')\n}\n\ntry {\n    refs.watched.addEventListener('click', () => {\n      refs.watched.classList.add('active');\n      refs.queue.classList.remove('active');\n    });\n  } catch (eror) {\n    console.log(eror);\n  }\n  \n  try {\n    refs.queue.addEventListener('click', () => {\n      refs.queue.classList.add('active');\n      refs.watched.classList.remove('active');\n    });\n  } catch (eror) {\n    console.log(eror);\n  }\n\n\n// refs.watched.addEventListener('click', ()=>{\n//     refs.watched.classList.add('active');\n//     refs.queue.classList.remove('active');\n// });\n\n// refs.queue.addEventListener('click', ()=>{\n//     refs.queue.classList.add('active');\n//     refs.watched.classList.remove('active');\n// });","const API_KEY = '1c5c067e324c39f9223ad13ef9891a0a';\n\nasync function fetchTrending(page) {\n  try {\n    const URL = 'https://api.themoviedb.org/3/trending/movie/week';\n\n    const response = await fetch(`${URL}?api_key=${API_KEY}&page=${page}`);\n    return response.json();\n  } catch (error) {\n    // обработка ошибки получения данных с бэкэнда\n    console.error(error);\n  }\n}\n\nasync function fetchSearchFilm(query, page) {\n  try {\n    const URL = 'https://api.themoviedb.org/3/search/movie';\n\n    const response = await fetch(\n      `${URL}?api_key=${API_KEY}&page=${page}&query=${query}`\n    );\n    return response.json();\n  } catch (error) {\n    // обработка ошибки получения данных с бэкэнда\n    console.error(error);\n  }\n}\n\nasync function fetchGenres() {\n  try {\n    const URL = 'https://api.themoviedb.org/3/genre/movie/list';\n\n    const response = await fetch(`${URL}?api_key=${API_KEY}`);\n    return response.json();\n  } catch (error) {\n    // обработка ошибки получения данных с бэкэнда\n    console.error(error);\n  }\n}\n\nasync function fetchIMDbId(filmoId) {\n  try {\n    console.log(filmoId);\n    const URL = 'https://api.themoviedb.org/3/movie/';\n\n    const response = await fetch(`${URL}${filmoId}?api_key=${API_KEY}`);\n    return response.json();\n  } catch (error) {\n    // обработка ошибки получения данных с бэкэнда\n    console.error(error);\n  }\n}\n\nexport { fetchTrending, fetchSearchFilm, fetchGenres, fetchIMDbId };\n\n// Комментарии по поиску\n//        Галерея:\n// Название фильма: title\n// Жанры: genre_ids  реализованы через localStorage\n// Год выхода фильма: release_date   нужно slice обрезать и оставить первые 4 знака (тип строка)\n// Оценка пользователей : vote_average  нужно округлить до 1 знака после запятой\n\n// Модальное окно:\n// дополнительно к Галерее:\n// Количество отзывов vote_count\n// Популярность popularity\n// Оригинальное название original_title\n// Описание overview\n","import {\n  fetchSearchFilm,\n  fetchTrending,\n  fetchGenres,\n  fetchIMDbId,\n} from './API.js';\n\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\n\nform.addEventListener('input', inputFilterFilm);\nform.addEventListener('submit', onSubmitFilterFilm);\n\nlet page = 1;\nlet searchNameFilm = '';\n\nlet currentArrFilmLS = [];\nlet currentFilmReadLS = [];\n\n// Получение с бэкэнда массива жанров фильмов и сохраниние его в LocalStorage для дальнейшей работы\n\nfetchGenres().then(responce => {\n  localStorage.setItem('Genres', JSON.stringify(responce.genres));\n});\n\n\n// Чтение перед загрузкой стартовой страницы сохраненного массива жанров фильмов\n\nconst gen = localStorage.getItem('Genres');\n\nfunction inputFilterFilm(event) {\n  searchNameFilm = event.target.value;\n}\n\nfunction onSubmitFilterFilm(event) {\n  event.preventDefault();\n  clearGallery();\n  fetchSearchFilm(searchNameFilm, page).then(responce => {\n    renderFilmoteka(responce);\n  });\n}\n\nfetchTrending(page).then(responce => {\n  renderFilmoteka(responce);\n});\n\nfunction renderFilmoteka(films) {\n  const arrayFilms = films.results;\n  const totalFilms = films.total_results;\n  const totalPage = films.total_pages;\n  makeGallery(arrayFilms);\n}\n\n// Чтение из LocalStorage массива текущей страницы галереи\nfunction onReadCurrentArrayFilmLS() {\n  let filmReadLocalStorage = localStorage.getItem('currentArrayFilm');\n  currentFilmReadLS = JSON.parse(filmReadLocalStorage);\n\n  console.log(currentFilmReadLS);\n\n}\n\nonReadCurrentArrayFilmLS();\nconsole.log(currentFilmReadLS);\n\n// Получение ID  фильма с объекта в LS\nfunction onReadIdFromLS(numberFilmPage) {\n  return currentFilmReadLS[numberFilmPage].id;\n}\n\n// Получение IMDb_id с бэкэнда через ID фильма с картотеки с сохранением IMDb_id в LS\nfetchIMDbId(onReadIdFromLS(2)).then(responce => {\n  localStorage.setItem('IMDb_id', JSON.stringify(responce.imdb_id));\n});\n\n// console.log(localStorage.getItem());\n\n// Чтение IMDb_id с LS для получения ссылки на сайт IMDb\nlet idIMDb = JSON.parse(localStorage.getItem('IMDb_id'));\nconsole.log(idIMDb);\n\n// Пример открытия ссылки в новой вкладке\n// console.log(window.open(`https://www.imdb.com/title/${idIMDb}`, '_blank'));\n\nfunction makeGallery(arrayCards) {\n  const API_IMAGE = 'https://image.tmdb.org/t/p';\n  currentArrFilmLS = [];\n  const markup = arrayCards\n    .map(card => {\n      // Формирование массива текущей страницы для записи в LocalStorage для последующего использования в модальном окне\n      currentArrFilmLS.push(card);\n      //\n      let genres = '';\n      const genresLocalStorage = localStorage.getItem('Genres');\n      const gen = JSON.parse(genresLocalStorage);\n      if (card.genre_ids.length !== 0) {\n        Object.values(gen).forEach(value => {\n          if (card.genre_ids.includes(value.id)) {\n            genres = genres.concat(value.name, ', ');\n          }\n        });\n      }\n      genres = genres.slice(0, genres.length - 2);\n      return `<div class=\"card\">\n      <img class=\"gallery__image\" src=\"${API_IMAGE}/w300${card.poster_path}\" alt=\"Постер не найден\" loading=\"lazy\" />\n    <p class=\"genres\">${genres}</p>\n  </div>`;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  // Удаление из LocalStorage массива жанров фильмов\n  localStorage.removeItem('Genres');\n  // Сохранение в LocalStorage массива фильмов текущей страницы\n  localStorage.setItem('currentArrayFilm', JSON.stringify(currentArrFilmLS));\n}\n\n// Очистка галереи\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n}\n","const galleryLib = document.querySelector('.gallery-lib');\nconst divContaunerText = document.querySelector('.div__text--decoration');\n\n\nfunction renderGalleryLib(movie) {\n  const markupGalleryLib = movie\n    .map(mov => {\n      const { title, genre_ids, release_date, vote_average, id, poster_path } =\n        mov;\n      return `<li class=\"gallery__item\">\n            <a class=\"gallery__card\" href=\"#\" id=\"${id}\">\n               <picture>\n                  <source media=\"(min-width: 1280px)\" srcset=\"\n                              https://image.tmdb.org/t/p/w500${poster_path}    1x,\n                              https://image.tmdb.org/t/p/original${poster_path} 2x,\n                              https://image.tmdb.org/t/p/original${poster_path} 3x\n                           \" type=\"image/jpg\" />\n                  <source media=\"(min-width: 768px)\" srcset=\"\n                              https://image.tmdb.org/t/p/w342${poster_path}    1x,\n                              https://image.tmdb.org/t/p/w780${poster_path} 2x,\n                              https://image.tmdb.org/t/p/original${poster_path} 3x\n                           \" type=\"image/jpg\" />\n                  <source media=\"(max-width: 767px)\" srcset=\"\n                              https://image.tmdb.org/t/p/w342${poster_path}    1x,\n                              https://image.tmdb.org/t/p/w780${poster_path} 2x,\n                              https://image.tmdb.org/t/p/original${poster_path} 3x\n                           \" type=\"image/jpg\" />\n                  <img class=\"gallery__foto\" src=\"https://image.tmdb.org/t/p/w500${poster_path}\" width=\"450\"\n                     height=\"294\" alt=\"${title} poster\" loading=\"lazy\" />\n               </picture>\n               <h2 class=\"gallery__subtitle\">${title}</h2>\n               <div class=\"gallery__info\">\n                  <p class=\"gallery__genres\">${genre_ids}</p>\n                  <p class=\"gallery__year\">${release_date}</p>\n                  <p class=\"gallery__vote-average\">${vote_average}</p>\n               </div>\n            </a>\n         </li>`;\n    })\n    .join('');\n  galleryLib.insertAdjacentElement('beforebegin', markupGalleryLib);\n}\n"],"names":["$bdfcdc80b4c38739$export$1cd6975ec0fe7e3d","document","querySelector","window","addEventListener","setTimeout","classList","add","$8aad853c076397e7$var$refs","formEl","inputEl","buttonEl","error","e","preventDefault","formValue","currentTarget","elements","value","style","display","reset","eror","console","log","$1cafa503bc57b7a0$var$refs","watched","queue","remove","eror1","async","$9641fdd394b90517$export$2fb6161e4448238a","query","page","URL","fetch","json","$35780a5662e3ee94$var$gallery","$35780a5662e3ee94$var$form","event","$35780a5662e3ee94$var$searchNameFilm","target","innerHTML","then","responce","$35780a5662e3ee94$var$renderFilmoteka","$35780a5662e3ee94$var$currentArrFilmLS","$35780a5662e3ee94$var$currentFilmReadLS","localStorage","setItem","JSON","stringify","genres","getItem","films","arrayFilms","results","total_results","total_pages","arrayCards","API_IMAGE","markup","map","card","push","genresLocalStorage","gen1","parse","genre_ids","length","Object","values","forEach","includes","id","concat","name","slice","poster_path","join","insertAdjacentHTML","removeItem","$35780a5662e3ee94$var$makeGallery","numberFilmPage","filmReadLocalStorage","$35780a5662e3ee94$var$onReadCurrentArrayFilmLS","filmoId","imdb_id","$35780a5662e3ee94$var$idIMDb"],"version":3,"file":"library.2587f66f.js.map"}