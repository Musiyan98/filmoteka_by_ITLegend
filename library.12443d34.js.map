{"mappings":"AACO,MAAMA,EAASC,SAASC,cAAc,SAE7CC,OAAOC,iBAAiB,oBAIjB,WACLC,YAAW,KACTL,EAAOM,UAAUC,IAAI,UACpB,QCILC,eAAeC,EAAgBC,EAAOC,GACpC,IACE,MAAMC,EAAM,4CAKZ,aAHuBC,MACrB,GAAGD,mDAA+BD,WAAcD,MAElCI,OAChB,MAAOC,GAE+BC,QAA9BD,MAAMA,ICtBlB,MAAME,EAAUhB,SAASC,cAAc,YACjCgB,EAAOjB,SAASC,cAAc,SAEpCgB,EAAKd,iBAAiB,SAYtB,SAAyBe,GACvBC,EAAiBD,EAAME,OAAOC,SAZhCJ,EAAKd,iBAAiB,UAetB,SAA4Be,GAC1BA,EAAMI,iBA2CNN,EAAQO,UAAY,GAzCpBf,EAAgBW,EAhBP,GAgB6BK,MAAKC,IACzCC,EAAgBD,SAjBpB,IACIN,EAAiB,IDmBrBZ,iBACE,IACE,MAAMI,EAAM,gDAGZ,aADuBC,MAAM,GAAGD,+CAChBE,OAChB,MAAOC,GAE+BC,QAA9BD,MAAMA,KCzBlB,GAAcU,MAAKC,IACjBE,aAAaC,QAAQ,SAAUC,KAAKC,UAAUL,EAASM,YAG7CJ,aAAaK,QAAQ,UAkBjC,SAASN,EAAgBO,GACvB,MAAMC,EAAaD,EAAME,QACNF,EAAMG,cACPH,EAAMI,aAI1B,SAAqBC,GACnB,MAAMC,EAAY,6BACZC,EAASF,EACZG,KAAIC,IACH,IAAIX,EAAS,GACb,MAAMY,EAAqBhB,aAAaK,QAAQ,UAC1CY,EAAMf,KAAKgB,MAAMF,GASvB,OAR8B,IAA1BD,EAAKI,UAAUC,QACjBC,OAAOC,OAAOL,GAAKM,SAAQ7B,IACrBqB,EAAKI,UAAUK,SAAS9B,EAAM+B,MAChCrB,EAASA,EAAOsB,OAAOhC,EAAMiC,KAAM,UAIzCvB,EAASA,EAAOwB,MAAM,EAAGxB,EAAOgB,OAAS,GAClC,8DAC4BR,SAAiBG,EAAKc,gFACvCzB,qBAGnB0B,KAAK,IACRzC,EAAQ0C,mBAAmB,YAAalB,GAxBxCmB,CAAYzB,IDnCd3B,eAA6BG,GAC3B,IACE,MAAMC,EAAM,mDAGZ,aADuBC,MAAM,GAAGD,mDAA+BD,MAC/CG,OAChB,MAAOC,GAE+BC,QAA9BD,MAAMA,KCmBlB,CArBW,GAqBSU,MAAKC,IACvBC,EAAgBD","sources":["src/js/loader.js","src/js/API.js","src/js/renderPage.js"],"sourcesContent":["// REF FOR LOADER BACKDROP\nexport const maskEl = document.querySelector('.mask');\n\nwindow.addEventListener('DOMContentLoaded', onWindowLoad);\n\n// FUNCTION FOR LOADER WHEN APP STARTING\n\nexport function onWindowLoad() {\n  setTimeout(() => {\n    maskEl.classList.add('hide');\n  }, 600);\n}\n\n// LOADER SHOW FUNCTION\n\nexport function loaderShow() {\n  maskEl.classList.remove('hide');\n}\n\n// LOADER HIDE FUNCTION\n\nexport function loaderHide() {\n  setTimeout(() => {\n    maskEl.classList.add('hide');\n  }, 600);\n}\n","const API_KEY = '1c5c067e324c39f9223ad13ef9891a0a';\n\nasync function fetchTrending(page) {\n  try {\n    const URL = 'https://api.themoviedb.org/3/trending/movie/week';\n\n    const response = await fetch(`${URL}?api_key=${API_KEY}&page=${page}`);\n    return response.json();\n  } catch (error) {\n    // обработка ошибки получения данных с бэкэнда\n    console.error(error);\n  }\n}\n\nasync function fetchSearchFilm(query, page) {\n  try {\n    const URL = 'https://api.themoviedb.org/3/search/movie';\n\n    const response = await fetch(\n      `${URL}?api_key=${API_KEY}&page=${page}&query=${query}`\n    );\n    return response.json();\n  } catch (error) {\n    // обработка ошибки получения данных с бэкэнда\n    console.error(error);\n  }\n}\n\nasync function fetchGenres() {\n  try {\n    const URL = 'https://api.themoviedb.org/3/genre/movie/list';\n\n    const response = await fetch(`${URL}?api_key=${API_KEY}`);\n    return response.json();\n  } catch (error) {\n    // обработка ошибки получения данных с бэкэнда\n    console.error(error);\n  }\n}\n\nexport { fetchTrending, fetchSearchFilm, fetchGenres };\n\n// Комментарии по поиску\n//        Галерея:\n// Название фильма: title\n// Жанры: genre_ids  реализованы через localStorage\n// Год выхода фильма: release_date   нужно slice обрезать и оставить первые 4 знака (тип строка)\n// Оценка пользователей : vote_average  нужно округлить до 1 знака после запятой\n\n// Модальное окно:\n// дополнительно к Галерее:\n// Количество отзывов vote_count\n// Популярность popularity\n// Оригинальное название original_title\n// Описание overview\n","import { fetchSearchFilm, fetchTrending, fetchGenres } from './API.js';\n\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\n\nform.addEventListener('input', inputFilterFilm);\nform.addEventListener('submit', onSubmitFilterFilm);\n\nlet page = 1;\nlet searchNameFilm = '';\n\nfetchGenres().then(responce => {\n  localStorage.setItem('Genres', JSON.stringify(responce.genres));\n});\n\nconst gen = localStorage.getItem('Genres');\n\nfunction inputFilterFilm(event) {\n  searchNameFilm = event.target.value;\n}\n\nfunction onSubmitFilterFilm(event) {\n  event.preventDefault();\n  clearGallery();\n  fetchSearchFilm(searchNameFilm, page).then(responce => {\n    renderFilmoteka(responce);\n  });\n}\n\nfetchTrending(page).then(responce => {\n  renderFilmoteka(responce);\n});\n\nfunction renderFilmoteka(films) {\n  const arrayFilms = films.results;\n  const totalFilms = films.total_results;\n  const totalPage = films.total_pages;\n  makeGallery(arrayFilms);\n}\n\nfunction makeGallery(arrayCards) {\n  const API_IMAGE = 'https://image.tmdb.org/t/p';\n  const markup = arrayCards\n    .map(card => {\n      let genres = '';\n      const genresLocalStorage = localStorage.getItem('Genres');\n      const gen = JSON.parse(genresLocalStorage);\n      if (card.genre_ids.length !== 0) {\n        Object.values(gen).forEach(value => {\n          if (card.genre_ids.includes(value.id)) {\n            genres = genres.concat(value.name, ', ');\n          }\n        });\n      }\n      genres = genres.slice(0, genres.length - 2);\n      return `<div class=\"card\">\n      <img class=\"gallery__image\" src=\"${API_IMAGE}/w300${card.poster_path}\" alt=\"Постер не найден\" loading=\"lazy\" />\n    <p class=\"genres\">${genres}</p>\n  </div>`;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n}\n"],"names":["$bdfcdc80b4c38739$export$1cd6975ec0fe7e3d","document","querySelector","window","addEventListener","setTimeout","classList","add","async","$9641fdd394b90517$export$2fb6161e4448238a","query","page","URL","fetch","json","error","console","$35780a5662e3ee94$var$gallery","$35780a5662e3ee94$var$form","event","$35780a5662e3ee94$var$searchNameFilm","target","value","preventDefault","innerHTML","then","responce","$35780a5662e3ee94$var$renderFilmoteka","localStorage","setItem","JSON","stringify","genres","getItem","films","arrayFilms","results","total_results","total_pages","arrayCards","API_IMAGE","markup","map","card","genresLocalStorage","gen1","parse","genre_ids","length","Object","values","forEach","includes","id","concat","name","slice","poster_path","join","insertAdjacentHTML","$35780a5662e3ee94$var$makeGallery"],"version":3,"file":"library.12443d34.js.map"}