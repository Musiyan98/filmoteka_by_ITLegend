const e=document.querySelector(".mask");window.addEventListener("DOMContentLoaded",(function(){setTimeout((()=>{e.classList.add("hide")}),600)}));const t={formEl:document.querySelector(".form"),inputEl:document.querySelector(".input__form"),buttonEl:document.querySelector(".submit"),error:document.querySelector(".error__message")};try{t.formEl.addEventListener("submit",(function(e){e.preventDefault();const a=e.currentTarget.elements[0].value;t.error.style.display="none",""==a&&(t.error.style.display="block");e.currentTarget.reset()}))}catch(e){console.log(e)}const a={watched:document.querySelector(".watched"),queue:document.querySelector(".queue")};try{a.watched.addEventListener("click",(()=>{a.watched.classList.add("active"),a.queue.classList.remove("active")}))}catch(e){console.log(e)}try{a.queue.addEventListener("click",(()=>{a.queue.classList.add("active"),a.watched.classList.remove("active")}))}catch(e){console.log(e)}async function n(e,t){try{const a="https://api.themoviedb.org/3/search/movie";return(await fetch(`${a}?api_key=1c5c067e324c39f9223ad13ef9891a0a&page=${t}&query=${e}`)).json()}catch(e){console.error(e)}}const o=document.querySelector(".gallery"),r=localStorage.getItem("currentArrayFilm");JSON.parse(r);var l=function(e){const t=e.map((e=>{const{title:t,genresName:a,release_date:n,id:o,poster_path:r}=e;return`<li class="gallery__item">\n            <a class="gallery__card" href="#" id="${o}">\n               <picture>\n                  <source media="(min-width: 1280px)" srcset="\n                              https://image.tmdb.org/t/p/w500${r}    1x,\n                              https://image.tmdb.org/t/p/original${r} 2x,\n                              https://image.tmdb.org/t/p/original${r} 3x\n                           " type="image/jpg" />\n                  <source media="(min-width: 768px)" srcset="\n                              https://image.tmdb.org/t/p/w342${r}    1x,\n                              https://image.tmdb.org/t/p/w780${r} 2x,\n                              https://image.tmdb.org/t/p/original${r} 3x\n                           " type="image/jpg" />\n                  <source media="(max-width: 767px)" srcset="\n                              https://image.tmdb.org/t/p/w342${r}    1x,\n                              https://image.tmdb.org/t/p/w780${r} 2x,\n                              https://image.tmdb.org/t/p/original${r} 3x\n                           " type="image/jpg" />\n                  <img class="gallery__foto" src="https://image.tmdb.org/t/p/w500${r}" width="450"\n                     height="294" alt="${t} poster" loading="lazy" />\n               </picture>\n               <h2 class="gallery__subtitle">${t}</h2>\n               <div class="gallery__info">\n                  <p class="gallery__genres">${a}</p>\n                  <p class="gallery__year">${n.slice(0,4)}</p>\n               </div>\n            </a>\n         </li>`})).join("");o.insertAdjacentHTML("beforeend",t)};const s=document.querySelector(".gallery"),c=document.querySelector(".form");c.addEventListener("input",(function(e){i=e.target.value})),c.addEventListener("submit",(function(e){e.preventDefault(),s.innerHTML="",n(i,1).then((e=>{m(e)}))}));let i="",d=[];(async function(){try{const e="https://api.themoviedb.org/3/genre/movie/list";return(await fetch(`${e}?api_key=1c5c067e324c39f9223ad13ef9891a0a`)).json()}catch(e){console.error(e)}})().then((e=>{localStorage.setItem("Genres",JSON.stringify(e.genres))}));localStorage.getItem("Genres");const u=localStorage.getItem("currentArrayFilm");JSON.parse(u);function m(e){const t=e.results;e.total_results,e.total_pages;let a=function(e){d=[];e.map((e=>{d.push(e)}));let t=function(e){return e.map((e=>{return(t=e).genresName=function(e){let t="";const a=localStorage.getItem("Genres"),n=JSON.parse(a);return 0!==e.length&&(e.length>3&&(e=e.slice(0,3)),Object.values(n).forEach((a=>{e.includes(a.id)&&(t=t.concat(a.name,", "))}))),t=t.slice(0,t.length-2),t}(t.genre_ids),t;var t}))}(d);return localStorage.setItem("currentArrayFilm",JSON.stringify(t)),console.log("LS",t),t}(t);l(a)}(async function(e){try{const t="https://api.themoviedb.org/3/trending/movie/week";return(await fetch(`${t}?api_key=1c5c067e324c39f9223ad13ef9891a0a&page=${e}`)).json()}catch(e){console.error(e)}})(1).then((e=>{m(e)})).catch((e=>{console.log(e)}));document.querySelector(".gallery-lib"),document.querySelector(".div__text--decoration");function g(e){let t="";const a=localStorage.getItem("Genres"),n=JSON.parse(a);return 0!==e.length&&(e.length>3&&(e=e.slice(0,3)),Object.values(n).forEach((a=>{e.includes(a.id)&&(t=t.concat(a.name,", "))}))),t}function p(e){return e.genresName=g(e.genre_ids),e}document.querySelector(".gallery").addEventListener("click",(function(e){if(e.target===e.currentTarget)return;let t=(o=e.target.closest(".gallery__card").id,function(){let e=localStorage.getItem("currentArrayFilm");return currentFilmReadLS=JSON.parse(e),currentFilmReadLS}().find((e=>e.id===Number(o)))),a=(g(t.genre_ids),p(t)),n=JSON.parse(localStorage.getItem("IMDb_id"));var o;(function(e,t){const{id:a,title:n,original_title:o,poster_path:r,popularity:l,vote_average:s,vote_count:c,overview:i,genresName:d}=e;document.querySelector(".modal").lastChild.remove();let u=`    \n        <div class="button-modal--flex">\n            <img class="button-modal__img" src="https://image.tmdb.org/t/p/original${r}" alt="${n} poster">\n            <div class="modal__about--movie">\n                <h2 class="modal__about--title">${n}</h2>\n                <p class="modal__about--title--movie">Vote / Votes <span class="modal__about--rating">${s}</span><span\n                        class="modal__about--title--movie-slech">/</span> <span\n                        class="modal__about--text--bleck">${c}</span>\n                </p>\n                <a target="_blank" class="imdb-btn" href="https://www.imdb.com/title/${t}">IMDb</a>\n\n                <p class="modal__about--title--movie">Popularity<span\n                        class="modal__about--text--popularity">${l}</span>\n                <p class="modal__about--title--movie">Original Title<span class="modal__about--text--original--title">A\n                        ${o}</span>\n                <p class="modal__about--title--movie">Genre<span class="modal__about--text--genre">${d}</span>\n                </p>\n                </p>\n                <p class="about__movie--text">About</p>\n                <p class="about__movie--text--content">${i}</p>\n                <ul class="list__btn--add">\n                    <li><button class="add__watched" data-id="${a}" type="button">add to Watched</button></li>\n                    <li><button class="aadd_queue" data-id="${a}" type="button">add to queue</button></li>\n                </ul>\n\n            </div>\n        </div>\n    </div>`;document.querySelector(".modal").insertAdjacentHTML("beforeend",u)})(a,n),document.querySelector(".backdrop").classList.remove("display__none")})),document.querySelector(".button-modal__close").addEventListener("click",(e=>{document.querySelector(".backdrop").classList.add("display__none"),document.querySelector(".modal").lastChild.remove()}));
//# sourceMappingURL=library.75f7f1e7.js.map
