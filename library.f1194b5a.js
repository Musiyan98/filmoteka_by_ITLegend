const e=document.querySelector(".mask");window.addEventListener("DOMContentLoaded",(function(){setTimeout((()=>{e.classList.add("hide")}),600)}));const t={formEl:document.querySelector(".form"),inputEl:document.querySelector(".input__form"),buttonEl:document.querySelector(".submit"),error:document.querySelector(".error__message")};t.formEl.addEventListener("submit",(function(e){e.preventDefault();const r=e.currentTarget.elements[0].value;t.error.style.display="none",""==r&&(t.error.style.display="block");e.currentTarget.reset()}));async function r(e,t){try{const r="https://api.themoviedb.org/3/search/movie";return(await fetch(`${r}?api_key=1c5c067e324c39f9223ad13ef9891a0a&page=${t}&query=${e}`)).json()}catch(e){console.error(e)}}const n=document.querySelector(".gallery"),o=document.querySelector(".form");o.addEventListener("input",(function(e){c=e.target.value})),o.addEventListener("submit",(function(e){e.preventDefault(),n.innerHTML="",r(c,1).then((e=>{l(e)}))}));let c="",a=[],s=[];(async function(){try{const e="https://api.themoviedb.org/3/genre/movie/list";return(await fetch(`${e}?api_key=1c5c067e324c39f9223ad13ef9891a0a`)).json()}catch(e){console.error(e)}})().then((e=>{localStorage.setItem("Genres",JSON.stringify(e.genres))}));localStorage.getItem("Genres");function l(e){const t=e.results;e.total_results,e.total_pages;!function(e){const t="https://image.tmdb.org/t/p";a=[];const r=e.map((e=>{a.push(e);let r="";const n=localStorage.getItem("Genres"),o=JSON.parse(n);return 0!==e.genre_ids.length&&Object.values(o).forEach((t=>{e.genre_ids.includes(t.id)&&(r=r.concat(t.name,", "))})),r=r.slice(0,r.length-2),`<div class="card">\n      <img class="gallery__image" src="${t}/w300${e.poster_path}" alt="Постер не найден" loading="lazy" />\n    <p class="genres">${r}</p>\n  </div>`})).join("");n.insertAdjacentHTML("beforeend",r),localStorage.removeItem("Genres"),localStorage.setItem("currentArrayFilm",JSON.stringify(a))}(t)}(async function(e){try{const t="https://api.themoviedb.org/3/trending/movie/week";return(await fetch(`${t}?api_key=1c5c067e324c39f9223ad13ef9891a0a&page=${e}`)).json()}catch(e){console.error(e)}})(1).then((e=>{l(e)})),function(){let e=localStorage.getItem("currentArrayFilm");s=JSON.parse(e),console.log(s)}();document.querySelector(".gallery-lib"),document.querySelector(".div__text--decoration");
//# sourceMappingURL=library.f1194b5a.js.map
