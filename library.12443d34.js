const e=document.querySelector(".mask");window.addEventListener("DOMContentLoaded",(function(){setTimeout((()=>{e.classList.add("hide")}),600)}));async function t(e,t){try{const n="https://api.themoviedb.org/3/search/movie";return(await fetch(`${n}?api_key=1c5c067e324c39f9223ad13ef9891a0a&page=${t}&query=${e}`)).json()}catch(e){console.error(e)}}const n=document.querySelector(".gallery"),a=document.querySelector(".form");a.addEventListener("input",(function(e){c=e.target.value})),a.addEventListener("submit",(function(e){e.preventDefault(),n.innerHTML="",t(c,1).then((e=>{o(e)}))}));let c="";(async function(){try{const e="https://api.themoviedb.org/3/genre/movie/list";return(await fetch(`${e}?api_key=1c5c067e324c39f9223ad13ef9891a0a`)).json()}catch(e){console.error(e)}})().then((e=>{localStorage.setItem("Genres",JSON.stringify(e.genres))}));localStorage.getItem("Genres");function o(e){const t=e.results;e.total_results,e.total_pages;!function(e){const t="https://image.tmdb.org/t/p",a=e.map((e=>{let n="";const a=localStorage.getItem("Genres"),c=JSON.parse(a);return 0!==e.genre_ids.length&&Object.values(c).forEach((t=>{e.genre_ids.includes(t.id)&&(n=n.concat(t.name,", "))})),n=n.slice(0,n.length-2),`<div class="card">\n      <img class="gallery__image" src="${t}/w300${e.poster_path}" alt="Постер не найден" loading="lazy" />\n    <p class="genres">${n}</p>\n  </div>`})).join("");n.insertAdjacentHTML("beforeend",a)}(t)}(async function(e){try{const t="https://api.themoviedb.org/3/trending/movie/week";return(await fetch(`${t}?api_key=1c5c067e324c39f9223ad13ef9891a0a&page=${e}`)).json()}catch(e){console.error(e)}})(1).then((e=>{o(e)}));
//# sourceMappingURL=library.12443d34.js.map
